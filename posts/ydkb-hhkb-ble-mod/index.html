<!doctype html><html lang=en><head><meta charset=utf-8><meta http-equiv=x-ua-compatible content="chrome=1"><meta name=viewport content="width=device-width,initial-scale=1"><meta name=robots content="noodp"><meta name=author content="hare"><link rel=prev href=https://hare.one/posts/digispark-badusb/><link rel=next href=https://hare.one/posts/how-to-understand-english-part1/><link rel=canonical href=https://hare.one/posts/ydkb-hhkb-ble-mod/><link rel=apple-touch-icon sizes=180x180 href=/apple-touch-icon.png><link rel=icon type=image/png sizes=32x32 href=/favicon-32x32.png><link rel=icon type=image/png sizes=16x16 href=/favicon-16x16.png><link rel=manifest href=/site.webmanifest><link rel=mask-icon href=/safari-pinned-tab.svg color=#5bbad5><meta name=msapplication-TileColor content="#da532c"><meta name=theme-color content="#ffffff"><title>YDKB HHKB BLE Mod | WhereIsMyMind</title><meta name=title content="YDKB HHKB BLE Mod | WhereIsMyMind"><link rel=stylesheet href=/css/main.min.css><script type=application/ld+json>{"@context":"http://schema.org","@type":"BlogPosting","mainEntityOfPage":{"@type":"WebPage","@id":"https:\/\/hare.one"},"articleSection":"posts","name":"YDKB HHKB BLE Mod","headline":"YDKB HHKB BLE Mod","description":"\u003ch3 id=\u0022前因\u0022\u003e前因\u003c\/h3\u003e\n\u003cp\u003e家里的 HHKB 闲置了有一段时间，因为每次使用都要给 MacBook 插扩展坞，再连接 USB 到扩展坞上，麻烦不说，还会挡住触控板的使用，直接把 HHKB 放在 MacBook 键盘的位置吧，连线部分又会卡在屏幕上，反正就是怎么样都不爽。也考虑过用 L 型的 USB 连接线，但是桌面上还是线越少越好，所以考虑用蓝牙来解决这个问题。\u003c\/p\u003e\n\u003ch3 id=\u0022选择\u0022\u003e选择\u003c\/h3\u003e\n\u003cp\u003eHHKB 自己是有蓝牙版本的，叫做 HHKB BT。身边用过的朋友都说使用上很坑，原因是 Bluetooth 3.0 容易被干扰，比如说 WiFi 2.4G 信号，甚至是电脑外接 USB 3.0 都可能会造成干扰。而且电池仓换电池的供电方式也有些麻烦，所以这个选项直接 pass 掉。\u003c\/p\u003e\n\u003cp\u003e\u003cspan class=\u0022spoiler\u0022 \u003e 注 1：现在已经有新款的 HHKB Hybrid Types 了，使用的 Bluetooth 4.2，同样支持蓝牙双模\u003c\/span\u003e\n\u003cbr\u003e\n\u003cspan class=\u0022spoiler\u0022 \u003e\u003cdel\u003e 注 2：有信仰的兄弟可以冲冲冲，我继续搞我的魔改\u003c\/del\u003e\u003c\/span\u003e\u003c\/p\u003e\n\u003cimg src=\u0022\\Pictures\\hhkb-ble0.png\u0022 alt=\u0022hhkb-ble0\u0022 style=\u0022zoom:80%;\u0022 \/\u003e\n\u003ccenter\u003eHHKB BT\u003c\/center\u003e\n\u003cp\u003e直到我看到了这篇 \u003ca href=\u0022https:\/\/www.chiphell.com\/thread-2026980-1-1.html\u0022\u003eHHKB 的正确使用方式\u003c\/a\u003e，我觉得找到了我需要的解决方案。\u003c\/p\u003e\n\u003cp\u003e这个叫做 YDKB 的解决方案是由 @yangdigi 开发的主控芯片，通过替换 HHKB 原厂的主控芯片，就可以使它变成蓝牙双模 \u002b 有线的版本。而且 YDKB 的 \u003ca href=\u0022http:\/\/help.ydkb.io\/doku.php?id=start\u0022\u003e文档\u003c\/a\u003e 写得巨详细，我喜欢。\u003c\/p\u003e","inLanguage":"en","author":"hare","creator":"hare","publisher":"hare","accountablePerson":"hare","copyrightHolder":"hare","copyrightYear":"2020","datePublished":"2020-07-30 18:07:43 \u002b0800 \u002b0800","dateModified":"2020-07-30 18:07:43 \u002b0800 \u002b0800","url":"https:\/\/hare.one\/posts\/ydkb-hhkb-ble-mod\/","wordCount":"1879","keywords":["生命在于折腾","HHKB","Keyboard","WhereIsMyMind"]}</script></head><body><div class=wrapper><nav class=navbar><progress class=content_progress max=0 value=0></progress><div class=container><div class="navbar-header header-back2home-logo"><span class=logo_mark>#</span>
<a href=https://hare.one><span class=logo_text>cd /home/</span>
<span class=logo_cursor></span></a></div><div class=navbar-right><span class=menu><a class=menu-item href=/posts/ title><span>Blog</span></a>
<a class=menu-item href=/cheatsheet/ title><span>CheatSheet</span></a>
<a class=menu-item href=/categories/ title><span>Category</span></a>
<a class=menu-item href=/tags/ title><span>Tag</span></a>
<a class=menu-item href=/index.xml title><i class="fa fa-rss"></i>
<span></span></a>
<span class=divide></span>
<a href=javascript:void(0); class=theme-switch><i class="fa fa-adjust"></i></a></span></div></div></nav><nav class=navbar-mobile id=nav-mobile style=display:none><progress class=content_progress max=0 value=0></progress><div class=container><div class=navbar><div class="navbar-header header-logo"><a href=https://hare.one>WhereIsMyMind</a></div><div class=navbar-right><div class=menu-toggle><span></span><span></span><span></span></div></div></div><div class=menu id=mobile-menu><nav class=mb-md><a class=menu-item href=/posts/ title><h3>Blog</h3><div class=menu-active></div></a><a class=menu-item href=/cheatsheet/ title><h3>CheatSheet</h3><div class=menu-active></div></a><a class=menu-item href=/categories/ title><h3>Category</h3><div class=menu-active></div></a><a class=menu-item href=/tags/ title><h3>Tag</h3><div class=menu-active></div></a><a class=menu-item href=/index.xml title><h3></h3><div class=menu-active></div></a></nav></div></div></nav><main class=main><div class=container><article class=post-warp itemscope itemtype=http://schema.org/Article><header class=post-header><h1 class=post-title itemprop="name headline">YDKB HHKB BLE Mod</h1><div class=post-meta>Written by <a itemprop=name href=https://hare.one rel=author>hare</a>
<span class=post-time>on <time datetime=2020-07-30 itemprop=datePublished>July 30, 2020</time></span>
in
<i class="fa fa-folder"></i>
<span class=post-category><a href=https://hare.one/categories/%E7%94%9F%E5%91%BD%E5%9C%A8%E4%BA%8E%E6%8A%98%E8%85%BE/>生命在于折腾,</a></span>
<span class=post-word-count>1879 words</span></div></header><div class=post-content><h3 id=前因>前因</h3><p>家里的 HHKB 闲置了有一段时间，因为每次使用都要给 MacBook 插扩展坞，再连接 USB 到扩展坞上，麻烦不说，还会挡住触控板的使用，直接把 HHKB 放在 MacBook 键盘的位置吧，连线部分又会卡在屏幕上，反正就是怎么样都不爽。也考虑过用 L 型的 USB 连接线，但是桌面上还是线越少越好，所以考虑用蓝牙来解决这个问题。</p><h3 id=选择>选择</h3><p>HHKB 自己是有蓝牙版本的，叫做 HHKB BT。身边用过的朋友都说使用上很坑，原因是 Bluetooth 3.0 容易被干扰，比如说 WiFi 2.4G 信号，甚至是电脑外接 USB 3.0 都可能会造成干扰。而且电池仓换电池的供电方式也有些麻烦，所以这个选项直接 pass 掉。</p><p><span class=spoiler>注 1：现在已经有新款的 HHKB Hybrid Types 了，使用的 Bluetooth 4.2，同样支持蓝牙双模</span><br><span class=spoiler><del>注 2：有信仰的兄弟可以冲冲冲，我继续搞我的魔改</del></span></p><img src=\Pictures\hhkb-ble0.png alt=hhkb-ble0 style=zoom:80%>
<center>HHKB BT</center><p>直到我看到了这篇 <a href=https://www.chiphell.com/thread-2026980-1-1.html>HHKB 的正确使用方式</a>，我觉得找到了我需要的解决方案。</p><p>这个叫做 YDKB 的解决方案是由 @yangdigi 开发的主控芯片，通过替换 HHKB 原厂的主控芯片，就可以使它变成蓝牙双模 + 有线的版本。而且 YDKB 的 <a href="http://help.ydkb.io/doku.php?id=start">文档</a> 写得巨详细，我喜欢。</p><h3 id=开搞>开搞</h3><p>话不多说，赶紧在淘宝上下单了改装套件，我自己选择了改装主控芯片 + 锂电池 2500mAh 的版本，不过锂电池也可以自己购置，只需要大小满足要求即可。</p><img src=\Pictures\hhkb-ble1.jpg alt=hhkb-ble1 style=zoom:25%>
<center>主控芯片</center><p>安装过程很简单，一共只需要拧下四颗螺丝，替换原厂主控，安装锂电池就 ok 了。随 YDKB 主控模块还附带了三支可插拔的 LED，需要注意的是 LED 的光线只能透过白色版本的 HHKB，黑色的是透不过外壳的。不过这个只是作为提示用，并不是必须安装的选项，不安装的话，也会在 USB 接口的位置闪烁来提示，但没有这样直观。</p><img src=\Pictures\hhkb-ble2.jpg alt=hhkb-ble2 style=zoom:25%>
<center>电池和附赠胶条</center><p>锂电池用附赠的双面胶条贴在键盘外壳内壁靠近的位置就可以，垫上一层泡泡纸防止键盘短接。我在这里出现了一个小插曲：电池的触点不严，导致无法供电。刚好手头也没有电烙铁，跟店家说了下就给我补发了新的电池。<span class=spoiler><del>店家说从开始卖一共就三块电池出过问题，我中奖了。</del></span></p><img src=\Pictures\hhkb-ble3.jpg alt=hhkb-ble3 style=zoom:25%>
<center>原装主控和 HHKB BLE MOD 对比</center><p>YDKB 主控上有一个朝内的 USB 接口，这里可以装一个 U 盘，不过只能在连接了 USB 线的时候可以读取。我找到了一个几年前的 Kingston 8GB U 盘，也是你继续发光发热的时候了，去掉了外壳就插在了这里。对齐了 LED 就可以合上盖子拧螺丝了。到这里就替换完了。</p><img src=\Pictures\hhkb-ble4.jpg alt=hhkb-ble4 style=zoom:25%>
<center>装好 LED 和内置 U 盘</center><p>打开开关盖子，原本有六个开关的地方只有一个开关了，打开即可。</p><p>原本六个开关的功能，现在可以通过刷固件进行，YDKB 支持 8 层自定义按键设置 + LEDmap 设置，烧写固件也很方便，全部都可以通过 <a href=http://ydkb.io>ydkb.io</a> 搞定。</p><h3 id=keymap>Keymap</h3><p>之前说 YDKB 支持 8 层自定义按键，这 8 层其实是像下面这样叠在一起的，每次按键，从 L7 开始往下找开启的层，如果该层打开，则使用该层的键位，如果键位为 TRNS，则继续向下查找，直到找到按键或到最底层。</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-plaintext data-lang=plaintext><span style=display:flex><span>7       / ESC / F1  / F2  / F3   ....
</span></span><span style=display:flex><span>:      /-----/-----/-----/-----
</span></span><span style=display:flex><span>:     / TAB /  Q  /  W  /  E   ....
</span></span><span style=display:flex><span>:    /-----/-----/-----/-----
</span></span><span style=display:flex><span>:   /LCtrl/  A  /  S  /  D   ....
</span></span><span style=display:flex><span>:  /  :     :     :     :
</span></span><span style=display:flex><span>2 `--------------------------
</span></span><span style=display:flex><span>1 `--------------------------
</span></span><span style=display:flex><span>0 `--------------------------
</span></span></code></pre></div><p>下面是我的 Keymap，可以用来参考。</p><h4 id=colemak-keyboard-layout>Colemak Keyboard Layout</h4><img src=\Pictures\hhkb-ble6.png alt=hhkb-ble6 style=zoom:100%>
<center>Layer0</center>
最近了解了一下键盘布局，对 Colemak 这种键盘布局很感兴趣，想要尝试切换一下布局试试。
未能熟练使用前可能不常用，所以暂时将 Colemak 布局放在最底层，最低程度降低对其他层的影响。<p>想要了解 Colemak 布局的话可以看这里：<a href=https://colemak.com>Colemak.com</a></p><p>这时候就凸显了 HHKB Pro 2 无刻版的好处，键盘自在心中。<span class=spoiler><del>所谓键上无码，心中有码</del></span></p><h4 id=qwerty-keyboard-layout>QWERTY Keyboard Layout</h4><img src=\Pictures\hhkb-ble7.png alt=hhkb-ble7 style=zoom:100%>
<center>Layer1</center>
这一层不必多说，就是常用的 QWERTY 布局。<p>不一样的细节：</p><ul><li><strong>Esc 键</strong>：跟 shift 一起按就是 ~ 键，这个比 HHKB 自己在右上角的 ~ 更符合使用习惯。</li><li><strong>数字 3 键</strong>：单独按就是正常的 3 键，与其他键一起使用时就是瞬时开启 Layer2。</li><li><strong>数字 4 键</strong>：单独按就是正常的 4 键，与 Alt 键一起按就是 F4 键，因为偶尔需要切换到 Windows 下操作。</li></ul><p>接下来这一层是配合<strong>数字 3 键</strong>使用的：</p><h4 id=tricks-keys-layout>Tricks Keys Layout</h4><img src=\Pictures\hhkb-ble8.png alt=hhkb-ble8 style=zoom:100%>
<center>Layer2</center><ul><li><p>3 + hjkl 的键位设置为左下上右，Vim 用户都懂。</p></li><li><p>3 + u 键的位置设置为 CapsLock，在 macOS 下用来快速切换中英输入法，免得用小指去找 Fn。</p></li><li><p>, . 键的位置改成了 - 和 +，macOS 自带的输入法只能用 - 和 + 翻页，现在可以一直在主键盘区操作，不用小指去找。</p></li></ul><h4 id=function-keys-layout>Function Keys Layout</h4><img src=\Pictures\hhkb-ble9.png alt=hhkb-ble9 style=zoom:100%>
<center>Layer3</center><p>我将原本 HHKB fn 的按键改成了瞬时切换到 Layer3，除了实现原本 fn 键的功能，还添加了一些杂七杂八的控制按键。</p><p>不得不感叹一下，仅仅用了四层就将 60 键的 HHKB 扩展了这么多功能，YDKB 大法好！</p><p>上面的 Keymap 在我的 <a href=https://github.com/hare001/HHKB-Keymap>GitHub</a> 仓库里可以直接下载固件。</p><p>或者是直接访问 <a href="http://ydkb.io/?hhkb_ble-0#H4sIAAAAAAAAA+1US25bMQy80CzEP3UWI/e/Rod6SWM4SVGgLeJFIYNPlsSROEPydrvJgmRKH1vHLjgCCVVsqIGrAnVwm8f0BTdJiEMbwQ0C8JhgkALKH13pY9ANWzChh0ssR4q7wBwWsIQVrGEbvs4WL1a4nbnDA57wGu+GbwQv4JWKMASfGIhEFIKLGzkYSEUaPZKXMYZEFrKRG7VQglIUI3IU0WXPeqEatenUCy1oRRva0YFONKNu9MZe2IJNUgzbsYMeO7ELu7E34+f7Fnkw45fRryJpY+PYPLaO7WP3WDIkMhSJKGf0JbVCJsWGxPmSdZKkgzZYgzQ4gzIYRFCSTIgbsc64BBy99tGFazqKDHS8CljD5ki3Rj2KTannijcBB/7vCiiTLw/6yf2Yl+HzcYl15pOoJ4Z8T96vxy8wP55gblyTR7LlA9XD3yejR4Iri05OPe5HfXn57wVwsfonQf7LE4eZt39HoPQqppGw5q4WY2HGZExn8YxlhmewUkfLYJ3Nvzp2MjW1bMraWbBrqpbuVGIyTF/F55x5NZa17prXFaxlljyzd9rDdIgBe+8RuO8Q8upReelzdYyeVlf9Jiuj4P60jhqBn43/9FD7qYE+RTY8y4n71vjsb/2GOn3yt/5n5JsYefkBAis58SAKAAA=">我的分享</a> 在我的配置文件基础上进行修改。</p><h3 id=tips>Tips</h3><p>我想把 HHKB 放到 MacBook 上使用，为了避免误触，需要在 HHKB 接入 MacBook 的时候自动禁用内置键盘。</p><p>这里需要使用 karabiner 实现。</p><p>像下图这样配置 karabiner 即可实现 HHKB 蓝牙接入时禁用内置键盘的功能。</p><img src=\Pictures\karabiner.png alt=karabiner style=zoom:25%>
另外，可能还需要在系统配置里调整下 fn 功能键的作用，不然可能会在某些需要 fn 快捷键的情况下却调整了亮度声音。
勾选 **Use F1,F2,etc. keys as standard function keys on external keyboards...** 选项。
<img src=\Pictures\keyboardsetting.png alt=keyboardsetting style=zoom:25%><p>到这里我们就可以愉快的码字敲代码了，关于电量究竟能用多久等我用光一次再说。🤣</p><p>最后配一张完工图。</p><img src=\Pictures\hhkb-ble5.jpg alt=hhkb-ble5 style=zoom:25%>
<center>完工图</center></div><div class=post-copyright><p class=copyright-item><span>Author:</span>
<span>hare</span></p><p class=copyright-item><span>Link:</span>
<a href=https://hare.one/posts/ydkb-hhkb-ble-mod/>https://hare.one/posts/ydkb-hhkb-ble-mod/</span></p><p class="copyright-item lincese">本文采用<a rel=license href=http://creativecommons.org/licenses/by-nc/4.0/ target=_blank>知识共享署名-非商业性使用 4.0 国际许可协议</a>进行许可</p></div><div class=post-tags><section><i class="fa fa-bookmark"></i>Tag(s):
<span class=tag><a href=https://hare.one/tags/%E7%94%9F%E5%91%BD%E5%9C%A8%E4%BA%8E%E6%8A%98%E8%85%BE/>#生命在于折腾</a></span>
<span class=tag><a href=https://hare.one/tags/hhkb/>#HHKB</a></span>
<span class=tag><a href=https://hare.one/tags/keyboard/>#Keyboard</a></span></section><section><a href=javascript:window.history.back();>back</a></span> ·
<span><a href=https://hare.one>home</a></span></section></div><div class=post-nav><a href=https://hare.one/posts/digispark-badusb/ class=prev rel=prev title="Digispark BadUSB"><i class="fa fa-chevron-left"></i>&nbsp;Digispark BadUSB</a>
<a href=https://hare.one/posts/how-to-understand-english-part1/ class=next rel=next title=搞懂英语（一）>搞懂英语（一）&nbsp;<i class="fa fa-chevron-right"></i></a></div><div class=post-comment></div></article></div></main><footer class=footer><div class=copyright>&copy;
<span itemprop=copyrightYear>2020 - 2022</span>
<span class=author itemprop=copyrightHolder><a href=https://hare.one>hare</a> |</span>
<span>Powered by <a href=https://gohugo.io/ target=_blank rel="external nofollow">Hugo</a> & <a href=https://github.com/Mogeko/Mogege target=_blank rel="external nofollow">Mogege</a></span></div></footer><script defer src=/js/vendor_main.min.js></script>
<script src=https://cdn.jsdelivr.net/npm/pangu@4.0.7/dist/browser/pangu.min.js integrity="sha256-j+yj56cdEY2CwkVtGyz18fNybFGpMGJ8JxG3GSyO2+I=" crossorigin=anonymous></script>
<script>pangu.spacingPage()</script></div></body></html>